app-id: io.emeric.toolblex
runtime: org.freedesktop.Platform
runtime-version: '24.08'
sdk: org.freedesktop.Sdk
command: toolblex

rename-desktop-file: toolblex.desktop
rename-appdata-file: toolblex.appdata.xml
rename-icon: toolblex

finish-args:
  # Our UI is GPU accelerated
  - --device=dri
  # X11 + XShm access
  - --share=ipc
  - --socket=fallback-x11
  # Wayland access
  - --socket=wayland
  # We need Bluetooth support
  - --share=network
  - --allow=bluetooth
  - --system-talk-name=org.bluez

cleanup:
  - /bin/__pypache__
  - /bin/rst*
  - /include
  - /lib/cmake
  - /lib/cups
  - /lib/pkgconfig
  - /lib/python*
  - /share/doc
  - /share/man
  - /share/zsh
  - /src
  - '*.a'
  - '*.la'

modules:
  - name: qt-base
    buildsystem: cmake-ninja
    builddir: true
    config-opts:
      - -DCMAKE_BUILD_TYPE=RelWithDebInfo
      - -DQT_BUILD_EXAMPLES=OFF
      - -DQT_BUILD_TESTS=OFF
    sources:
      - type: archive
        url: https://download.qt.io/archive/qt/6.9/6.9.3/submodules/qtbase-everywhere-src-6.9.3.tar.xz
        sha256: c5a1a2f660356ec081febfa782998ae5ddbc5925117e64f50e4be9cd45b8dc6e
        x-checker-data:
          type: anitya
          project-id: 7927
          stable-only: true
          url-template: https://download.qt.io/archive/qt/$major.$minor/$version/submodules/qtbase-everywhere-src-$version.tar.xz
    cleanup:
      - /bin

  - name: qt-tools
    buildsystem: cmake-ninja
    builddir: true
    config-opts:
      - -DCMAKE_BUILD_TYPE=RelWithDebInfo
      - -DQT_BUILD_EXAMPLES=OFF
      - -DQT_BUILD_TESTS=OFF
    sources:
      - type: archive
        url: https://download.qt.io/archive/qt/6.9/6.9.3/submodules/qttools-everywhere-src-6.9.3.tar.xz
        sha256: 0cf7ab0e975fc57f5ce1375576a0a76e9ede25e6b01db3cf2339cd4d9750b4e9
        x-checker-data:
          type: anitya
          project-id: 7927
          stable-only: true
          url-template: https://download.qt.io/archive/qt/$major.$minor/$version/submodules/qttools-everywhere-src-$version.tar.xz

  - name: qt-shadertools
    buildsystem: cmake-ninja
    builddir: true
    config-opts:
      - -DCMAKE_BUILD_TYPE=RelWithDebInfo
      - -DQT_BUILD_EXAMPLES=OFF
      - -DQT_BUILD_TESTS=OFF
    sources:
      - type: archive
        url: https://download.qt.io/archive/qt/6.9/6.9.3/submodules/qtshadertools-everywhere-src-6.9.3.tar.xz
        sha256: 629804ee86a35503e4b616f9ab5175caef3da07bd771cf88a24da3b5d4284567
        x-checker-data:
          type: anitya
          project-id: 7927
          stable-only: true
          url-template: https://download.qt.io/archive/qt/$major.$minor/$version/submodules/qtshadertools-everywhere-src-$version.tar.xz

  - name: qtdeclarative
    buildsystem: cmake-ninja
    builddir: true
    config-opts:
      - -DCMAKE_BUILD_TYPE=RelWithDebInfo
      - -DQT_BUILD_EXAMPLES=OFF
      - -DQT_BUILD_TESTS=OFF
    sources:
      - type: archive
        url: https://download.qt.io/archive/qt/6.9/6.9.3/submodules/qtdeclarative-everywhere-src-6.9.3.tar.xz
        sha256: 5a071b227229afbf5c976b7b59a0d850818d06ae861fcdf6d690351ca3f8a260
        x-checker-data:
          type: anitya
          project-id: 7927
          stable-only: true
          url-template: https://download.qt.io/archive/qt/$major.$minor/$version/submodules/qtdeclarative-everywhere-src-$version.tar.xz

  - name: qtwayland
    buildsystem: cmake-ninja
    config-opts:
      - -DCMAKE_BUILD_TYPE=RelWithDebInfo
      - -DQT_BUILD_EXAMPLES=OFF
      - -DQT_BUILD_TESTS=OFF
    sources:
      - type: archive
        url: https://download.qt.io/archive/qt/6.9/6.9.3/submodules/qtwayland-everywhere-src-6.9.3.tar.xz
        sha256: e413d4bc9263e80a465761debf8cb8317aa6b01e814b20046a05258e6573dadd
        x-checker-data:
          type: anitya
          project-id: 7927
          stable-only: true
          url-template: https://download.qt.io/archive/qt/$major.$minor/$version/submodules/qtwayland-everywhere-src-$version.tar.xz
    cleanup:
      - /bin

  - name: qtsvg
    buildsystem: cmake-ninja
    config-opts:
      - -DCMAKE_BUILD_TYPE=RelWithDebInfo
      - -DQT_BUILD_EXAMPLES=OFF
      - -DQT_BUILD_TESTS=OFF
    sources:
      - type: archive
        url: https://download.qt.io/archive/qt/6.9/6.9.3/submodules/qtsvg-everywhere-src-6.9.3.tar.xz
        sha256: db76aa3358cbbe6fce7da576ff4669cb9801920188c750d3b12783bbe97026e2
        x-checker-data:
          type: anitya
          project-id: 7927
          stable-only: true
          url-template: https://download.qt.io/archive/qt/$major.$minor/$version/submodules/qtsvg-everywhere-src-$version.tar.xz

  - name: qtconnectivity
    buildsystem: cmake-ninja
    config-opts:
      - -DCMAKE_BUILD_TYPE=RelWithDebInfo
      - -DQT_BUILD_EXAMPLES=OFF
      - -DQT_BUILD_TESTS=OFF
    sources:
      - type: archive
        url: https://download.qt.io/archive/qt/6.9/6.9.3/submodules/qtconnectivity-everywhere-src-6.9.3.tar.xz
        sha256: e21bba5efb174c4456c5e5a7b4d52bba1ee62dfb4509bcff73fdfad9cb1dd7f5
        x-checker-data:
          type: anitya
          project-id: 7927
          stable-only: true
          url-template: https://download.qt.io/archive/qt/$major.$minor/$version/submodules/qtconnectivity-everywhere-src-$version.tar.xz

  - name: qtcharts
    buildsystem: cmake-ninja
    config-opts:
      - -DCMAKE_BUILD_TYPE=RelWithDebInfo
      - -DQT_BUILD_EXAMPLES=OFF
      - -DQT_BUILD_TESTS=OFF
    sources:
      - type: archive
        url: https://download.qt.io/archive/qt/6.9/6.9.3/submodules/qtcharts-everywhere-src-6.9.3.tar.xz
        sha256: 29d7cbbdb31d6a2e6c3ab5b5b52f34ff457db55d87d28a7c335b015d749d4c53
        x-checker-data:
          type: anitya
          project-id: 7927
          stable-only: true
          url-template: https://download.qt.io/archive/qt/$major.$minor/$version/submodules/qtcharts-everywhere-src-$version.tar.xz

  - name: toolblex
    buildsystem: qmake
    sources:
      - type: archive
        url: https://github.com/emericg/toolBLEx/archive/refs/tags/v0.13.tar.gz
        sha256: 9f0395485dabf565d3d449514a33f891016eba69656ce4869595ed69c788105e
